{"version":3,"sources":["constants.js","hooks/usePortalContract.js","containers/MessageContainer.js","pages/Home.js","hooks/useMetamask.js","game/states/Splash.js","game/utils.js","game/config.js","game/sprites/Body.js","game/sprites/Player.js","game/sprites/Enemy.js","game/texts/Banner.js","game/states/Game.js","game/states/Boot.js","game/game.js","pages/Game.js","hooks/useGame.js","App.js","reportWebVitals.js","index.js","global.js"],"names":["ETH","CHAIN_IDS","CHAIN_NETWORKS","CUSTOM_ERRORS","SUPPORTED_CHAIN_ID","contractABI","portalContract","abi","MessageContainer","account","messages","sendMessage","useState","message","setMessage","className","map","index","from","style","bottom","onSubmit","e","preventDefault","type","value","onChange","target","placeholder","outline","aria-hidden","focusable","data-prefix","data-icon","role","xmlns","viewBox","fill","d","withRouter","history","error","setError","window","ethereum","isConnected","setIsConnected","currentAccount","setCurrentAccount","handleAccountsChanged","useCallback","accounts","length","toLowerCase","Error","useEffect","detectEthereumProvider","then","provider","onChainChanged","chainId","decimal","parseInt","console","log","request","method","on","catch","err","connect","a","code","useMetamask","contractRef","useRef","likes","setLikes","setMessages","loading","setLoading","loadData","contract","current","getTotalLikes","count","toNumber","getAllMessages","m","user","timestamp","Date","signer","ethers","providers","Web3Provider","getSigner","Contract","finally","onLike","like","tx","wait","onSendMessage","usePortalContract","onConnectPress","disabled","cx","cy","r","stroke","strokeWidth","onClick","strokeLinecap","strokeLinejoin","push","SplashState","this","loaderBg","add","sprite","game","world","centerX","centerY","loaderBar","forEach","object","anchor","setTo","load","setPreloadSprite","image","spritesheet","audio","state","start","Phaser","State","constants","gameWidth","gameHeight","localStorageName","serverUrl","__DEV__","Body","x","y","asset","id","existing","set","physics","arcade","enable","legs","animations","addChild","torso","frame","ArrayUtils","numberArray","body","setCircle","height","width","collideWorldBounds","allowRotation","angle","destroy","Sprite","Player","maxSpeed","fireRate","camera","follow","cursor","input","keyboard","createCursorKeys","spaceButton","addKey","Keyboard","SPACEBAR","wasd","up","W","left","A","right","D","down","S","shootingSound","weapon","bulletKillType","Weapon","KILL_WORLD_BOUNDS","bulletSpeed","trackSprite","bullets","setAll","onFire","newShot","velocity","angularVelocity","isDown","direction","velocityFromAngle","play","stop","fireAngle","fire","Enemy","moves","immovable","Banner","text","font","padding","fontSize","smoothed","wordWrap","wordWrapWidth","align","Text","GameState","socket","io","config","playerCreated","bind","createEnemy","destroyPlayer","destroyEnemy","updateEnemy","lastTimeSocketCaptured","socketDelay","startSystem","Physics","ARCADE","checkCollision","setBounds","banner","logo","scale","enemies","group","enableBody","music","loop","playerLastPosition","emit","player","collide","currentPlayerPosition","legsAngle","legsFrame","torsoFrame","time","now","_","isEqual","enemy","find","children","playerId","debug","spriteInfo","forEachAlive","BootState","stage","disableVisibilityChange","scaleMode","ScaleManager","SHOW_ALL","fullScreenScaleMode","EXACT_FIT","pageAlignHorizontally","addKeyCapture","LEFT","RIGHT","UP","DOWN","fontsReady","fontsLoaded","WebFont","google","families","active","gameConfig","renderer","CANVAS","parentEl","containerRef","setGame","newGame","Game","parent","useGame","ref","App","path","component","Home","exact","render","to","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById","global","process","PIXI","require","p2"],"mappings":"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","file":"static/js/main.4f6c3512.chunk.js","sourcesContent":["export const ETH = {\n  ACCOUNTS: 'eth_accounts',\n  CHAIN_ID: 'eth_chainId',\n  REQ_ACCOUNTS: 'eth_requestAccounts',\n  CHAIN_CHANGED: 'chainChanged',\n  ACCOUNTS_CHANGED: 'accountsChanged',\n}\nexport const CHAIN_IDS = {\n  MAINNET: 1,\n  ROPSTEN: 3,\n  RINKEBY: 4,\n  GOERLI: 5,\n  KOVAN: 42\n}\nexport const CHAIN_NETWORKS = {\n  [CHAIN_IDS.MAINNET]: 'mainnet',\n  [CHAIN_IDS.ROPSTEN]: 'ropsten',\n  [CHAIN_IDS.RINKEBY]: 'rinkeby',\n  [CHAIN_IDS.GOERLI]: 'goerli',\n  [CHAIN_IDS.KOVAN]: 'kovan'\n}\nexport const CUSTOM_ERRORS = {\n  NO_METAMASK: 'No Metamask detected, please install',\n  MULTIPLE_WALLETS: 'Metamask installed, but multiple wallets have been detected',\n  NO_CONNECTED: 'Please connect to MetaMask.',\n  UNSUPPORTED_NETWORK: 'Unsupported network'\n}\n\nexport const SUPPORTED_CHAIN_ID = CHAIN_IDS.RINKEBY","import { useRef, useState, useEffect, useCallback } from 'react'\nimport { ethers } from 'ethers'\n\nimport portalContract from '../abis/Portal.json'\nimport { CUSTOM_ERRORS } from '../constants'\n\n/**\n * TODO: Remove this variable here that holds the contract address after you deploy!\n */\nconst contractAddress = '0x34EB1E92033F81dFe7a7A22b3b55bFd2Ea11aB1A'\nconst contractABI = portalContract.abi\n\nexport function usePortalContract () {\n  const contractRef = useRef()\n  const [error, setError] = useState()\n  const [likes, setLikes] = useState(0)\n  const [messages, setMessages] = useState([])\n  const [loading, setLoading] = useState(false)\n\n  const loadData = useCallback(async () => {\n    try {\n      const contract = contractRef.current\n      const count = await contract.getTotalLikes()\n      setLikes(count.toNumber())\n      const messages = await contract.getAllMessages()\n      if (messages) {\n        setMessages(messages.map(m => ({\n          from: m.user.toLowerCase(),\n          message: m.message,\n          timestamp: new Date(m.timestamp * 1000),\n        })))\n      }\n    } catch (err) {\n      setError(err)\n    }\n  }, [])\n\n\n  useEffect(() => {\n    if (!window.ethereum) {\n      return setError(new Error(CUSTOM_ERRORS.NO_METAMASK))\n    }\n\n    setLoading(true)\n    // Used to actually talk to Ethereum nodes\n    const provider = new ethers.providers.Web3Provider(window.ethereum)\n    // https://docs.ethers.io/v5/api/signer/#signers\n    const signer = provider.getSigner()\n    const contract = new ethers.Contract(contractAddress, contractABI, signer)\n    contractRef.current = contract\n    loadData().finally(() => setLoading(false))\n  }, [loadData])\n\n  const onLike = useCallback(async () => {\n    setLoading(true)\n    try {\n      const contract = contractRef.current\n      const tx = await contract.like()\n      await tx.wait()\n      await loadData()\n    } catch (err) {\n      setError(err)\n    } finally {\n      setLoading(false)\n    }\n  }, [loadData])\n\n  const onSendMessage = useCallback(async (message) => {\n    setLoading(true)\n    try {\n      const contract = contractRef.current\n      const tx = await contract.sendMessage(message)\n      await tx.wait()\n      await loadData()\n    } catch (err) {\n      setError(err)\n    } finally {\n      setLoading(false)\n    }\n  }, [loadData])\n\n  return {\n    error,\n    likes,\n    loading,\n    messages,\n    onLike,\n    onSendMessage,\n  }\n}","import { useState } from 'react'\n\nconst MessageContainer = ({ account, messages, sendMessage }) => {\n  const [message, setMessage] = useState('');\n\n  const handleChange = (e) => {\n    setMessage(e.target.value);\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    sendMessage(message);\n    setMessage('');\n  };\n\n  return (\n    <div className=\"flex flex-col\">\n      <div className=\"mt-20 mb-16 clearfix w-full\">\n        {messages.map(({ message, from }, index) => (\n          <div key={index} className=\"clearfix\">\n            <div\n              className={`bg-gray-300 w-3/4 mx-4 my-2 p-2 rounded-lg clearfix ${ from === account ? 'bg-green-300 float-right' : '' }`}\n            >{message}</div>\n          </div>\n        ))}\n      </div>\n      \n      <form className=\"flex justify-between bg-green-100\" style={{ bottom: 0 }} onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          value={message}\n          onChange={handleChange}\n          placeholder=\"Type a message...\"\n          className=\"flex-grow m-2 py-2 px-4 mr-1 rounded-full border border-gray-300 bg-gray-200 resize-none\"\n        />\n        <button className=\"m-2\" style={{ outline: 'none' }} type=\"submit\">\n          <svg\n            className=\"svg-inline--fa text-green-400 fa-paper-plane fa-w-16 w-12 h-12 py-2 mr-2\"\n            aria-hidden=\"true\"\n            focusable=\"false\"\n            data-prefix=\"fas\"\n            data-icon=\"paper-plane\"\n            role=\"img\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            viewBox=\"0 0 512 512\"\n          >\n            <path\n              fill=\"currentColor\"\n              d=\"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z\"\n            />\n          </svg>\n        </button>\n      </form>\n    </div>\n  )\n}\n\nexport default MessageContainer","import React, { useCallback } from 'react'\nimport { withRouter } from 'react-router-dom'\n\nimport { CHAIN_NETWORKS, SUPPORTED_CHAIN_ID } from '../constants'\nimport { useMetamask } from '../hooks/useMetamask'\nimport { usePortalContract } from '../hooks/usePortalContract'\nimport MessageContainer from '../containers/MessageContainer'\nimport './Home.css'\n\nexport default withRouter(({ history }) => {\n  const { error, connect, currentAccount, isConnected } = useMetamask()\n  const { likes, loading, messages, onLike, onSendMessage } = usePortalContract()\n  const onConnectPress = useCallback(async () => {\n    if (!isConnected) {\n      await connect()\n    }\n  }, [connect, isConnected])\n\n  return (\n    <section className=\"container mx-auto min-h-screen flex flex-col\">\n      <div className=\"min-h-screen flex flex-col justify-center\">\n        <div className=\"header\">\n        👋 Hey there! <br/>\n        Welcome to <span className=\"text-red-500\">The Crypto Purge</span> game! 💸\n        <br/>\n        Total likes: {likes}\n        {loading ? (\n          <button disabled className=\"disabled:opacity-50 mx-5 bg-blue-500 p-2 font-semibold text-white inline-flex items-center space-x-2 rounded\">\n            <svg className=\"animate-spin h-8 w-8 text-white\" fill=\"none\" viewBox=\"0 0 24 24\">\n              <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n              <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n            </svg>\n          </button>\n        ) : (\n          <button disabled={!!error} onClick={onLike} className=\"disabled:opacity-50 mx-5 bg-blue-500 p-2 font-semibold text-white inline-flex items-center space-x-2 rounded\">\n            <svg className=\"h-8 w-8 text-white\"  viewBox=\"0 0 24 24\"  fill=\"none\"  stroke=\"currentColor\"  strokeWidth=\"2\"  strokeLinecap=\"round\"  strokeLinejoin=\"round\">  <path d=\"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z\" /></svg>\n          </button>\n        )}\n        </div>\n\n        <div className=\"bio\">\n          {currentAccount ? (\n            <p>\n              Wallet Connected: <b>{currentAccount}</b>\n            </p>\n          ) : (\n            <p>Connect your Ethereum wallet and give us a like!</p>\n          )}\n        </div>\n        {error && (\n          <div role=\"alert\" className=\"m-10\">\n            <div className=\"bg-red-500 text-white font-bold rounded-t px-4 py-2\">\n              Error\n            </div>\n            <div className=\"border border-t-0 border-red-400 rounded-b bg-red-100 px-4 py-3 text-red-700\">\n              <p>{error.message}</p>\n              <p>Remember to use the {CHAIN_NETWORKS[SUPPORTED_CHAIN_ID]} network :)</p>\n            </div>\n          </div>\n        )}\n        {isConnected ? (\n          <button disabled={!!error} onClick={() => history.push('/game')} className=\"disabled:opacity-50 bg-green-500 hover:bg-green-700 text-white font-bold mt-6 py-2 px-4 rounded max-w-xs mx-auto\">\n            Play\n          </button>\n        ) : (\n          <button onClick={onConnectPress} className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold mt-6 py-2 px-4 rounded max-w-xs mx-auto\">\n            Connect\n          </button>\n        )}\n        <MessageContainer account={currentAccount} messages={messages} sendMessage={onSendMessage} />\n      </div>\n    </section>\n  )\n})\n","import { useState, useEffect, useCallback } from 'react'\nimport detectEthereumProvider from '@metamask/detect-provider'\n\nimport { CUSTOM_ERRORS, CHAIN_NETWORKS, ETH, SUPPORTED_CHAIN_ID } from '../constants'\n\nexport function useMetamask () {\n  const [error, setError] = useState()\n  const [isConnected, setIsConnected] = useState(() => window.ethereum?.isConnected())\n  const [currentAccount, setCurrentAccount] = useState()\n\n  const handleAccountsChanged = useCallback((accounts) => {\n    let account = currentAccount\n    if (!accounts.length) {\n      // MetaMask is locked or the user has not connected any accounts\n      setError(new Error(CUSTOM_ERRORS.NO_CONNECTED))\n    } else if (accounts[0] !== currentAccount) {\n      account = accounts[0]\n      setCurrentAccount(accounts[0].toLowerCase())\n    }\n    return account\n  }, [currentAccount])\n\n  useEffect(() => {\n    if (window.ethereum) {\n      setIsConnected(window.ethereum.isConnected())\n    }\n  }, [currentAccount])\n\n  useEffect(() => {\n    if (!window.ethereum) {\n      return setError(new Error(CUSTOM_ERRORS.NO_METAMASK))\n    }\n    /*****************************************/\n    /* Detect the MetaMask Ethereum provider */\n    /*****************************************/\n    detectEthereumProvider().then(provider => {\n      if (!provider) {\n        setError(new Error(CUSTOM_ERRORS.NO_METAMASK))\n      } else if (provider !== window.ethereum) {\n        setError(new Error(CUSTOM_ERRORS.MULTIPLE_WALLETS))\n      }\n    })\n\n    /**********************************************************/\n    /* Handle chain (network) and chainChanged (per EIP-1193) */\n    /**********************************************************/\n    const onChainChanged = (chainId) => {\n      const decimal = parseInt(chainId)\n      if (CHAIN_NETWORKS[decimal]) {\n        console.log(`You are on the ${CHAIN_NETWORKS[decimal]} network :)`)\n      }\n      setError(decimal === SUPPORTED_CHAIN_ID ? null : new Error(CUSTOM_ERRORS.UNSUPPORTED_NETWORK))\n    }\n    window.ethereum.request({ method: ETH.CHAIN_ID }).then(onChainChanged)\n    window.ethereum.on(ETH.CHAIN_CHANGED, onChainChanged)\n\n    /***********************************************************/\n    /* Handle user accounts and accountsChanged (per EIP-1193) */\n    /***********************************************************/\n    window.ethereum.request({ method: ETH.ACCOUNTS })\n    .then(handleAccountsChanged)\n    .catch((err) => {\n      // Some unexpected error.\n      // For backwards compatibility reasons, if no accounts are available,\n      // eth_accounts will return an empty array.\n      setError(err)\n    })\n    window.ethereum.on(ETH.ACCOUNTS_CHANGED, handleAccountsChanged)\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [])\n\n  /*********************************************/\n  /* Access the user's accounts (per EIP-1102) */\n  /*********************************************/\n  const connect = useCallback(async () => {\n    return window.ethereum.request({ method: ETH.REQ_ACCOUNTS })\n    .then(handleAccountsChanged)\n    .catch((err) => {\n      if (err.code === 4001) {\n        // EIP-1193 userRejectedRequest error\n        // If this happens, the user rejected the connection request.\n        setError(new Error(CUSTOM_ERRORS.NO_CONNECTED))\n      } else {\n        setError(err)\n      }\n    });\n  }, [handleAccountsChanged])\n\n  return {\n    error,\n    connect,\n    isConnected,\n    currentAccount\n  }\n}","import Phaser from 'phaser-ce'\nimport { centerGameObjects } from '../utils'\n\nclass SplashState extends Phaser.State {\n  preload () {\n    this.loaderBg = this.add.sprite(this.game.world.centerX, this.game.world.centerY, 'loaderBg')\n    this.loaderBar = this.add.sprite(this.game.world.centerX, this.game.world.centerY, 'loaderBar')\n    centerGameObjects([this.loaderBg, this.loaderBar])\n    this.load.setPreloadSprite(this.loaderBar)\n\n    /**\n     * Load resources from other domain (CORS is required)\n     */\n    // this.load.baseURL = 'http://www.nicholls.co/'\n    // this.load.crossOrigin = 'anonymous'\n\n    /**\n     * Load the assets\n     */\n    this.load.image('level1', 'assets/images/level1.jpg')\n\n    this.load.image('sonar', 'assets/images/sonar.png')\n    this.load.image('sonar-logo-rest', 'assets/images/sonar-logo-rest.png')\n    this.load.image('sonar-logo-ring', 'assets/images/sonar-logo-ring.png')\n    this.load.image('sonar-logo', 'assets/images/sonar-logo.png')\n    this.load.image('bullet', 'assets/images/bullet.png')\n    this.load.spritesheet('player', 'assets/images/player.png', 80, 90)\n    this.load.spritesheet('legs', 'assets/images/legs.png', 80, 100)\n\n    this.load.audio('music', ['assets/audios/music.ogg', 'assets/audios/music.mp3'])\n    this.load.audio('shoot', ['assets/audios/shoot.ogg', 'assets/audios/shoot.mp3'])\n  }\n\n  create () {\n    this.state.start('Game')\n  }\n}\n\nexport default SplashState","export const centerGameObjects = (objects) => {\n  objects.forEach(function (object) {\n    object.anchor.setTo(0.5)\n  })\n}\n","const constants = {\n  gameWidth: 1200,\n  gameHeight: 800,\n  localStorageName: 'phaser-template',\n  // eslint-disable-next-line no-undef\n  serverUrl: __DEV__ ? 'http://localhost:8081' : 'https://phaser-realtime-basic-server.herokuapp.com'\n};\n\nexport default constants;\n","import Phaser from 'phaser-ce'\n\nclass Body extends Phaser.Sprite {\n  constructor ({ game, x, y, asset, id }) {\n    super(game, x, y)\n\n    this.id = id\n\n    /**\n     * Create the player object\n     */\n    game.add.existing(this)\n    this.anchor.set(0.5)\n    game.physics.arcade.enable(this)\n\n    /**\n     * Create the legs of the player\n     */\n    this.legs = game.add.sprite(0, 0, 'legs')\n    this.legs.anchor.set(0.5)\n    this.legs.animations.add('walk', null, 10, true)\n    game.physics.arcade.enable(this.legs)\n    this.addChild(this.legs)\n\n    /**\n     * Create the torso of the player\n     */\n    this.torso = game.add.sprite(x, y, asset)\n    this.torso.anchor.setTo(0.5, 0.7)\n    this.torso.frame = 2\n    this.torso.animations.add('walk', Phaser.ArrayUtils.numberArray(2, 9), 16, true)\n    game.physics.arcade.enable(this.torso)\n\n    this.body.setCircle(this.legs.height / 4, -this.legs.width / 10, -this.legs.height / 10)\n\n    this.legs.collideWorldBounds = true\n    this.torso.collideWorldBounds = true\n    this.body.collideWorldBounds = true\n    this.body.allowRotation = false\n  }\n\n  update () {\n    this.torso.x = this.x\n    this.torso.y = this.y\n    this.torso.angle = this.legs.angle\n  }\n\n  destroy () {\n    this.torso.destroy()\n    super.destroy()\n  }\n}\n\nexport default Body\n","import Phaser from 'phaser-ce'\nimport Body from './Body'\n\nclass Player extends Body {\n  constructor ({ game, x, y, asset, id }) {\n    super({ game, x, y, asset, id })\n\n    this.maxSpeed = 300\n    this.fireRate = 200\n    console.log(`PlayerId: ${id}`)\n\n    game.camera.follow(this)\n\n    /**\n     * Capture the cursor and the keyboard keys\n     */\n    this.cursor = game.input.keyboard.createCursorKeys()\n    this.spaceButton = game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR)\n    this.wasd = {\n      up: game.input.keyboard.addKey(Phaser.Keyboard.W),\n      left: game.input.keyboard.addKey(Phaser.Keyboard.A),\n      right: game.input.keyboard.addKey(Phaser.Keyboard.D),\n      down: game.input.keyboard.addKey(Phaser.Keyboard.S)\n    }\n\n    this.shootingSound = game.add.audio('shoot')\n    //  Creates 30 bullets, using the 'bullet' graphic\n    this.weapon = game.add.weapon(30, 'bullet')\n    //  The bullet will be automatically killed when it leaves the world bounds\n    this.weapon.bulletKillType = Phaser.Weapon.KILL_WORLD_BOUNDS\n    //  The speed at which the bullet is fired\n    this.weapon.bulletSpeed = 600\n    //  Speed-up the rate of fire, allowing them to shoot 1 bullet every 60ms\n    this.weapon.fireRate = this.fireRate\n    this.weapon.trackSprite(this.torso, 0, 0, false)\n    //  Fix the position of the bullets to create from the gun\n    this.weapon.bullets.setAll('anchor.x', -6)\n    this.weapon.bullets.setAll('anchor.y', 0)\n    this.weapon.onFire.add(this.newShot, this)\n  }\n\n  update () {\n    super.update()\n    this.body.velocity.x = 0\n    this.body.velocity.y = 0\n    this.legs.body.angularVelocity = 0\n\n    if (this.cursor.left.isDown || this.wasd.left.isDown) {\n      this.legs.body.angularVelocity = -this.maxSpeed\n    } else if (this.cursor.right.isDown || this.wasd.right.isDown) {\n      this.legs.body.angularVelocity = this.maxSpeed\n    }\n\n    var direction = null\n    if (this.cursor.up.isDown || this.wasd.up.isDown) direction = 1\n    if (this.cursor.down.isDown || this.wasd.down.isDown) direction = -1\n\n    if (direction) {\n      var angle = this.legs.angle - 90\n      this.game.physics.arcade.velocityFromAngle(angle, direction * this.maxSpeed, this.body.velocity)\n\n      this.torso.animations.play('walk')\n      this.legs.animations.play('walk')\n    } else {\n      this.torso.animations.stop()\n      this.legs.animations.stop()\n      this.torso.frame = 2\n      this.legs.frame = 0\n    }\n\n    if (this.spaceButton.isDown) {\n      this.torso.animations.stop()\n      this.torso.frame = 0\n      this.weapon.fireAngle = this.torso.angle - 90\n      this.weapon.fire()\n    }\n  }\n\n  newShot () {\n    this.shootingSound.play()\n  }\n}\n\nexport default Player","import Body from './Body'\n\nclass Enemy extends Body {\n  constructor ({ game, x, y, asset, id }) {\n    super({ game, x, y, asset, id })\n\n    console.log(`EnemyId: ${id}`)\n    /**\n     * Prevent movement from collisions\n     */\n    this.body.moves = false\n    /**\n     * Static objects like the walls\n     */\n    this.body.immovable = true\n  }\n}\n\nexport default Enemy","import Phaser from 'phaser-ce'\n\nclass Banner extends Phaser.Text {\n  constructor ({ game, x, y, text }) {\n    super(game, x, y, text)\n\n    this.font = 'Bangers'\n    this.padding.set(10, 16)\n    this.fontSize = 70\n    // this.fill = '#77BFA3'\n    this.fill = 'white'\n    this.smoothed = false\n    this.anchor.setTo(0.5)\n    this.wordWrap = true\n    this.wordWrapWidth = 800\n    this.align = 'center'\n  }\n}\n\nexport default Banner\n","/* globals __DEV__ */\nimport Phaser from 'phaser-ce'\nimport * as io from 'socket.io-client'\nimport _ from 'lodash'\n\nimport config from '../config'\nimport Player from '../sprites/Player'\nimport Enemy from '../sprites/Enemy'\nimport Banner from '../texts/Banner'\n\nclass GameState extends Phaser.State {\n  init () {\n    this.socket = io.connect(config.serverUrl)\n    this.socket.on('player.created', this.playerCreated.bind(this))\n    this.socket.on('player.enemyCreated', this.createEnemy.bind(this))\n    this.socket.on('player.disconnect', this.destroyPlayer.bind(this))\n    this.socket.on('enemy.disconnect', this.destroyEnemy.bind(this))\n    this.socket.on('enemy.position', this.updateEnemy.bind(this))\n    this.lastTimeSocketCaptured = 0\n    this.socketDelay = 1 / 60\n  }\n  /**\n   * Load dynamic assets per level\n   */\n  preload () {}\n\n  create () {\n    this.game.physics.startSystem(Phaser.Physics.ARCADE)\n    this.game.physics.arcade.checkCollision.down = true\n\n    this.add.image(0, 0, 'level1')\n    /**\n     * We can get data from the cache\n     */\n    // let cacheImage = this.game.cache.getImage('level1')\n    this.game.world.setBounds(0, 0, 3840, 1600)\n\n    this.banner = new Banner({\n      game: this.game,\n      x: this.world.centerX,\n      y: this.world.centerY - 50,\n      text: 'The Crypto Purge 💸 \\nfor                     '\n    })\n    this.game.add.existing(this.banner)\n    // this.logo = this.add.image(this.banner.x - 8, this.banner.y - 10, 'sonar')\n    // this.logo.scale.setTo(0.28)\n    this.logo = this.add.image(this.banner.x - 80, this.banner.y + 0, 'sonar-logo')\n    this.logo.scale.setTo(0.055)\n\n    // this.ring = this.add.image(this.world.centerX - 3, this.world.centerY + 170, 'sonar-logo-ring')\n    // this.ring.scale.setTo(0.8)\n    // this.ring.anchor.setTo(0.5)\n\n    this.enemies = this.game.add.group()\n    this.enemies.enableBody = true\n\n    this.music = this.game.add.audio('music')\n    this.music.loop = true\n    // this.music.play()\n\n    this.playerLastPosition = {}\n\n    // Initialize the socket\n    this.socket.emit('player.newPlayer', 'username')\n  }\n\n  update () {\n    if (!this.player) return\n    this.game.physics.arcade.collide(this.player, this.enemies)\n\n    var currentPlayerPosition = {\n      x: this.player.x,\n      y: this.player.y,\n      legsAngle: this.player.legs.angle,\n      legsFrame: this.player.legs.frame,\n      torsoFrame: this.player.torso.frame\n    }\n\n    if (\n      this.game.time.now > this.lastTimeSocketCaptured &&\n      !_.isEqual(this.playerLastPosition, currentPlayerPosition)\n    ) {\n      this.lastTimeSocketCaptured = this.game.time.now + this.socketDelay\n      this.socket.emit('player.movement', currentPlayerPosition)\n    }\n  }\n\n  playerCreated ({ player, enemies }) {\n    this.player = new Player({\n      game: this.game,\n      x: this.world.centerX,\n      y: this.world.centerY + 170,\n      asset: 'player',\n      id: player.id\n    })\n    _.forEach(enemies, (enemy) => this.createEnemy(enemy))\n  }\n\n  createEnemy ({ id, x, y, legsAngle = 0 }) {\n    var newEnemy = this.enemies.add(\n      new Enemy({\n        game: this.game,\n        x: x,\n        y: y,\n        asset: 'player',\n        id: id\n      })\n    )\n    newEnemy.legs.angle = legsAngle\n  }\n\n  updateEnemy ({ id, x, y, legsAngle, legsFrame, torsoFrame }) {\n    let enemy = _.find(this.enemies.children, { id: id })\n    if (enemy) {\n      enemy.x = x\n      enemy.y = y\n      enemy.legs.angle = legsAngle\n      enemy.legs.frame = legsFrame\n      enemy.torso.frame = torsoFrame\n    }\n  }\n\n  destroyPlayer () {\n    this.player.destroy()\n  }\n\n  destroyEnemy (playerId) {\n    let enemy = _.find(this.enemies.children, { id: playerId })\n    if (enemy) {\n      enemy.destroy()\n    }\n  }\n\n  render () {\n    if (__DEV__) {\n      if (this.player) {\n        this.game.debug.spriteInfo(this.player, 32, 32)\n        this.game.debug.body(this.player)\n      }\n      this.enemies.forEachAlive(function (enemy) {\n        this.game.debug.body(enemy, 'rgba(255, 0, 0, 0.5)')\n      }, this)\n    }\n  }\n}\n\nexport default GameState","import Phaser from 'phaser-ce'\nimport WebFont from 'webfontloader'\n\nimport SplashState from './Splash'\nimport GameState from './Game'\n\nclass BootState extends Phaser.State {\n  init () {\n    this.stage.disableVisibilityChange = true\n    this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL\n    this.scale.fullScreenScaleMode = Phaser.ScaleManager.EXACT_FIT\n    this.scale.pageAlignHorizontally = true\n\n    this.game.input.keyboard.addKeyCapture([\n      Phaser.Keyboard.LEFT,\n      Phaser.Keyboard.RIGHT,\n      Phaser.Keyboard.UP,\n      Phaser.Keyboard.DOWN,\n      Phaser.Keyboard.SPACEBAR\n    ])\n\n    this.fontsReady = false\n    this.fontsLoaded = this.fontsLoaded.bind(this)\n\n    this.state.add('Splash', SplashState)\n    this.state.add('Game', GameState)\n  }\n\n  preload () {\n    WebFont.load({\n      google: {\n        families: ['Bangers']\n      },\n      active: () => this.fontsLoaded()\n    })\n\n    const text = this.add.text(\n      this.world.centerX,\n      this.world.centerY,\n      'loading fonts',\n      {\n        font: '16px Arial', fill: '#dddddd', align: 'center' }\n    )\n    text.anchor.setTo(0.5, 0.5)\n\n    this.load.image('loaderBg', './assets/images/loader-bg.png')\n    this.load.image('loaderBar', './assets/images/loader-bar.png')\n  }\n\n  render () {\n    if (this.fontsReady) {\n      this.state.start('Splash')\n    }\n  }\n\n  fontsLoaded () {\n    this.fontsReady = true\n  }\n}\n\nexport default BootState","import Phaser from 'phaser-ce';\nimport BootState from './states/Boot';\n\nconst gameConfig = {\n  width: '100%',\n  height: '100%',\n  renderer: Phaser.CANVAS,\n  state: BootState\n};\n\nexport default gameConfig;\n","import React, { useRef } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nimport { useGame } from '../hooks/useGame';\nimport gameConfig from '../game/game';\n\nexport default withRouter(() => {\n  const parentEl = useRef(null);\n  useGame(gameConfig, parentEl);\n\n  return (\n    <section className=\"min-h-screen flex flex-col\">\n      <div ref={parentEl} className=\"flex-1\" />\n    </section>\n  );\n});\n","import { useState, useEffect } from 'react'\nimport Phaser from 'phaser-ce'\n\nexport function useGame (\n  config,\n  containerRef\n) {\n  const [game, setGame] = useState()\n  useEffect(() => {\n    if (!game && containerRef.current) {\n      const newGame = new Phaser.Game({ ...config, parent: containerRef.current })\n      setGame(newGame)\n    }\n    return () => {\n      game?.destroy()\n    }\n  }, [config, containerRef, game])\n\n  return game\n}\n","import {\n  Redirect,\n  Route,\n  Switch,\n  HashRouter as Router\n} from \"react-router-dom\";\nimport Home from \"./pages/Home\";\nimport Game from \"./pages/Game\";\n\nfunction App() {\n  return (\n    <Router>\n      <Switch>\n        <Route path=\"/home\" component={Home} exact />\n        <Route path=\"/game\" component={Game} exact />\n        <Route path=\"/\" render={() => <Redirect to=\"/home\" />} exact />\n      </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './global';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","global.__DEV__ = process.env.NODE_ENV === 'development';\n\n// Phaser Community Edition Global variables\nwindow.PIXI = require('phaser-ce/build/custom/pixi');\nwindow.p2 = require('phaser-ce/build/custom/p2');\nwindow.Phaser = require('phaser-ce/build/custom/phaser-split');\n"],"sourceRoot":""}